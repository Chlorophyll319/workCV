# 對話紀錄 - 側邊面板拖拽功能優化

**日期時間：** 2025/09/09 21:38:00
**任務類型：** UI/UX 優化 - 拖拽邊界調整

## 問題描述

用戶反映側邊面板的拖拽調整邊界位置不正確，需要調整拖拽邊界的定位和視覺效果。

## 執行的修改

### 1. 拖拽邊界定位調整

**問題：** 拖拽邊界原本在側邊面板內部左側，但用戶期望它在主內容區域和側邊面板之間。

**解決方案：**
- 將拖拽邊界從側邊面板內部移動到主內容區域右側
- 使用 `absolute` 定位避免佔用實際布局空間
- 調整為覆蓋層形式，防止影響滾動軸位置

### 2. 拖拽算法修正

**問題：** 拖拽方向與直覺相反

**修改前：**
```javascript
const newWidth = startWidth + (e.clientX - startX);
```

**修改後：**
```javascript
// 修正算法：側邊欄在右側，往左拖應該變小，往右拖應該變大
const newWidth = startWidth - (e.clientX - startX);
```

### 3. 視覺效果優化

**修改前：** 拖拽邊界常駐顯示，過於顯眼
**修改後：** 
- 預設透明 (`bg-transparent`)
- 只有 hover 時才顯示淡藍色 (`hover:bg-accent hover:bg-opacity-60`)
- 添加平滑過渡動畫 (`transition-colors duration-200`)

### 4. 最終定位方案

```html
<!-- 拖拽調整邊界 -->
<div
  v-if="!isSidebarCollapsed"
  @mousedown="startResize"
  :class="[
    'absolute right-0 top-0 w-2 h-full cursor-col-resize hover:bg-accent transition-colors duration-200 z-30',
    'bg-transparent hover:bg-accent hover:bg-opacity-60',
    'hidden md:block',
  ]"
  title="Drag to resize sidebar"
></div>
```

## 檔案修改清單

- `src/layouts/default.vue`：拖拽邊界定位、算法修正、視覺效果優化

## 技術細節

1. **定位策略：** 將拖拽邊界作為主編輯區域的絕對定位子元素
2. **事件處理：** 保持原有的滑鼠事件處理機制
3. **響應式設計：** 維持桌面版顯示，行動版隱藏的設計
4. **視覺反饋：** hover 狀態提供適當的視覺提示

## 用戶體驗改進

- ✅ 拖拽邊界位於符合直覺的位置（主內容區與側邊面板之間）
- ✅ 拖拽方向符合預期（左拖縮小，右拖放大）
- ✅ 不影響滾動軸位置
- ✅ 視覺上更加簡潔，只在需要時顯示
- ✅ 保持 8px 寬度確保易於點擊操作

## 狀態

**完成狀態：** ✅ 已完成基本修改，等待用戶測試反饋